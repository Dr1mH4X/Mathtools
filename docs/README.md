# MathTools â€” é¡¹ç›®æ¶æ„æ–‡æ¡£

> äº¤äº’å¼æ•°å­¦å¯è§†åŒ–å·¥å…·ç½‘ç«™ï¼Œä½¿ç”¨ Vue 3 + Vite + TypeScript æ„å»ºã€‚

---

## ç›®å½•

- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [é¡¹ç›®æ ¹ç›®å½•ç»“æ„](#é¡¹ç›®æ ¹ç›®å½•ç»“æ„)
- [src ç›®å½•è¯¦è§£](#src-ç›®å½•è¯¦è§£)
  - [å…¥å£ä¸å…¨å±€](#å…¥å£ä¸å…¨å±€)
  - [pages â€” é¡µé¢](#pages--é¡µé¢)
  - [components â€” ç»„ä»¶](#components--ç»„ä»¶)
  - [composables â€” ç»„åˆå¼å‡½æ•°](#composables--ç»„åˆå¼å‡½æ•°)
  - [utils â€” å·¥å…·åº“](#utils--å·¥å…·åº“)
  - [i18n â€” å›½é™…åŒ–](#i18n--å›½é™…åŒ–)
  - [router â€” è·¯ç”±](#router--è·¯ç”±)
- [æ ¸å¿ƒåŠŸèƒ½ï¼šæ—‹è½¬ä½“ä½“ç§¯å¯è§†åŒ–](#æ ¸å¿ƒåŠŸèƒ½æ—‹è½¬ä½“ä½“ç§¯å¯è§†åŒ–)
  - [æ•°æ®æµ](#æ•°æ®æµ)
  - [æ›²çº¿è¾“å…¥ä¸è§£æ](#æ›²çº¿è¾“å…¥ä¸è§£æ)
  - [åŒºåŸŸè®¡ç®—ç®—æ³•](#åŒºåŸŸè®¡ç®—ç®—æ³•)
  - [ä½“ç§¯è®¡ç®—](#ä½“ç§¯è®¡ç®—)
  - [3D æ¸²æŸ“ç®¡çº¿](#3d-æ¸²æŸ“ç®¡çº¿)
  - [2D ç”»å¸ƒè§†å›¾](#2d-ç”»å¸ƒè§†å›¾)
- [æ„å»ºä¸è¿è¡Œ](#æ„å»ºä¸è¿è¡Œ)
- [å…³é”®ä¾èµ–è¯´æ˜](#å…³é”®ä¾èµ–è¯´æ˜)

---

## æŠ€æœ¯æ ˆ

| ç±»åˆ«         | æŠ€æœ¯                                    |
| ------------ | --------------------------------------- |
| æ¡†æ¶         | Vue 3 (Composition API, `<script setup>`) |
| æ„å»ºå·¥å…·     | Vite 7 + pnpm                           |
| è¯­è¨€         | TypeScript (strict mode)                |
| è·¯ç”±         | vue-router 5                            |
| å›½é™…åŒ–       | vue-i18n 11 (ä¸­/è‹±)                     |
| æ•°å­¦å¼•æ“     | mathjs (è¡¨è¾¾å¼è§£æã€ç¼–è¯‘ã€æ±‚å€¼)          |
| 3D æ¸²æŸ“      | Three.js + OrbitControls                |
| å…¬å¼æ¸²æŸ“     | KaTeX                                   |

---

## é¡¹ç›®æ ¹ç›®å½•ç»“æ„

```
Mathtools/
â”œâ”€â”€ docs/                   # æœ¬æ–‡æ¡£æ‰€åœ¨ç›®å½•
â”œâ”€â”€ dist/                   # æ„å»ºäº§ç‰© (pnpm build åç”Ÿæˆ)
â”œâ”€â”€ public/                 # é™æ€èµ„æºï¼Œæ„å»ºæ—¶ç›´æ¥å¤åˆ¶åˆ° dist
â”‚   â””â”€â”€ vite.svg
â”œâ”€â”€ src/                    # æºç æ ¹ç›®å½• (è¯¦è§ä¸‹èŠ‚)
â”œâ”€â”€ index.html              # SPA å…¥å£ HTML
â”œâ”€â”€ package.json            # é¡¹ç›®ä¾èµ–ä¸è„šæœ¬
â”œâ”€â”€ pnpm-lock.yaml          # pnpm é”æ–‡ä»¶
â”œâ”€â”€ vite.config.ts          # Vite é…ç½® (åˆ«å @â†’src, manualChunks åˆ†åŒ…)
â”œâ”€â”€ tsconfig.json           # TypeScript é¡¹ç›®å¼•ç”¨å…¥å£
â”œâ”€â”€ tsconfig.app.json       # åº”ç”¨ä»£ç  TS é…ç½®
â”œâ”€â”€ tsconfig.node.json      # Node ä¾§ TS é…ç½® (vite.config ç­‰)
â”œâ”€â”€ .npmrc                  # pnpm é…ç½®
â””â”€â”€ .gitignore
```

---

## src ç›®å½•è¯¦è§£

```
src/
â”œâ”€â”€ main.ts                 # åº”ç”¨å…¥å£ï¼šåˆ›å»º app, æŒ‚è½½ router/i18n
â”œâ”€â”€ App.vue                 # æ ¹ç»„ä»¶ï¼šAppHeader + <router-view>
â”œâ”€â”€ env.d.ts                # Vite å…¨å±€ç±»å‹å£°æ˜
â”œâ”€â”€ style.css               # å…¨å±€ CSSï¼šå˜é‡ã€æš—è‰²ä¸»é¢˜ã€æŒ‰é’®/è¾“å…¥/å¡ç‰‡æ ·å¼
â”‚
â”œâ”€â”€ assets/                 # é™æ€èµ„æº (logo ç­‰)
â”‚   â””â”€â”€ vue.svg
â”‚
â”œâ”€â”€ pages/                  # è·¯ç”±çº§é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ Home.vue            # é¦–é¡µï¼šå·¥å…·å¡ç‰‡åˆ—è¡¨
â”‚   â”œâ”€â”€ RevolutionVolume.vue# â˜… æ—‹è½¬ä½“ä½“ç§¯å¯è§†åŒ– (ä¸»åŠŸèƒ½é¡µ)
â”‚   â””â”€â”€ PlaceholderPage.vue # å…¶ä½™åŠŸèƒ½çš„å ä½ "å³å°†æ¨å‡º" é¡µ
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â””â”€â”€ AppHeader.vue   # é¡¶éƒ¨å¯¼èˆªæ ï¼šè·¯ç”±é“¾æ¥ã€è¯­è¨€åˆ‡æ¢ã€ä¸»é¢˜åˆ‡æ¢
â”‚   â””â”€â”€ revolution/
â”‚       â””â”€â”€ Canvas2D.vue    # 2D ç”»å¸ƒï¼šåæ ‡ç³»ã€æ›²çº¿ã€åŒºåŸŸå¡«å……ã€äº¤äº’
â”‚
â”œâ”€â”€ composables/
â”‚   â””â”€â”€ useThreeScene.ts    # Three.js åœºæ™¯ç®¡ç† (ç»„åˆå¼å‡½æ•°)
â”‚
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ mathEngine.ts       # â˜… æ•°å­¦æ ¸å¿ƒï¼šè§£æ/ç§¯åˆ†/ç½‘æ ¼ç”Ÿæˆ/é¢„è®¾
â”‚
â”œâ”€â”€ i18n/
â”‚   â”œâ”€â”€ index.ts            # i18n å®ä¾‹ï¼šè¯­è¨€æ£€æµ‹ã€locale åˆ‡æ¢
â”‚   â””â”€â”€ locales/
â”‚       â”œâ”€â”€ en.json         # è‹±æ–‡æ–‡æ¡ˆ
â”‚       â””â”€â”€ zh.json         # ä¸­æ–‡æ–‡æ¡ˆ
â”‚
â””â”€â”€ router/
    â””â”€â”€ index.ts            # è·¯ç”±å®šä¹‰ï¼š/ /revolution /matrix ç­‰
```

---

### å…¥å£ä¸å…¨å±€

| æ–‡ä»¶            | èŒè´£                                                                 |
| --------------- | -------------------------------------------------------------------- |
| `main.ts`       | åˆ›å»º Vue åº”ç”¨å®ä¾‹ï¼Œæ³¨å†Œ router å’Œ i18n æ’ä»¶ï¼ŒæŒ‚è½½åˆ° `#app`           |
| `App.vue`       | æ ¹ç»„ä»¶ã€‚æ¸²æŸ“ `<AppHeader />` + `<router-view>` (å¸¦ fade è¿‡æ¸¡åŠ¨ç”»)    |
| `style.css`     | CSS è‡ªå®šä¹‰å±æ€§ (--c-bg, --c-primary ç­‰)ã€äº®/æš—ä¸»é¢˜ã€å…¨å±€åŸºç¡€æ ·å¼     |
| `env.d.ts`      | Vite å®¢æˆ·ç«¯ç±»å‹å£°æ˜ (`*.vue` æ¨¡å—ç­‰)                                 |

### pages â€” é¡µé¢

| æ–‡ä»¶                    | è·¯ç”±             | è¯´æ˜                                                         |
| ----------------------- | ---------------- | ------------------------------------------------------------ |
| `Home.vue`              | `/`              | é¦–é¡µã€‚å±•ç¤ºå·¥å…·å¡ç‰‡ç½‘æ ¼ï¼Œç‚¹å‡»è·³è½¬åˆ°å¯¹åº”åŠŸèƒ½é¡µ                 |
| `RevolutionVolume.vue`  | `/revolution`    | **æ ¸å¿ƒé¡µé¢**ã€‚å·¦ä¾§æ§åˆ¶é¢æ¿ + å³ä¾§å¯è§†åŒ–åŒºåŸŸ (3D/2D åˆ‡æ¢)    |
| `PlaceholderPage.vue`   | `/matrix` ç­‰     | å ä½é¡µé¢ã€‚æ˜¾ç¤º "å³å°†æ¨å‡º" åŠè¿”å›æŒ‰é’®                         |

### components â€” ç»„ä»¶

| æ–‡ä»¶                              | è¯´æ˜                                                                                  |
| --------------------------------- | ------------------------------------------------------------------------------------- |
| `layout/AppHeader.vue`            | å…¨å±€é¡¶æ ã€‚sticky å®šä½ã€‚åŒ…å« logoã€å¯¼èˆªé“¾æ¥ã€è¯­è¨€åˆ‡æ¢æŒ‰é’®ã€æš—è‰²æ¨¡å¼åˆ‡æ¢ã€ç§»åŠ¨ç«¯æ±‰å ¡èœå• |
| `revolution/Canvas2D.vue`         | 2D ç»˜å›¾ç»„ä»¶ã€‚æ¥æ”¶ `curves`/`region` propsï¼Œåœ¨ HTML Canvas ä¸Šç»˜åˆ¶åæ ‡ç³»ã€æ›²çº¿ã€å¡«å……åŒºåŸŸã€‚æ”¯æŒæ‹–æ‹½å¹³ç§»ã€æ»šè½®ç¼©æ”¾ |

### composables â€” ç»„åˆå¼å‡½æ•°

| æ–‡ä»¶                   | å¯¼å‡º                                           | è¯´æ˜                                                                                                              |
| ---------------------- | ---------------------------------------------- | ----------------------------------------------------------------------------------------------------------------- |
| `useThreeScene.ts`     | `useThreeScene()`, `defaultDisplayOptions`, `DisplayOptions` | å°è£…å®Œæ•´çš„ Three.js ç”Ÿå‘½å‘¨æœŸã€‚ç®¡ç† renderer/scene/camera/controls/ç¯å…‰ã€‚æä¾› `buildSolid()`ã€`updateDisplay()`ã€`startAnimation()`ã€`takeScreenshot()`ã€`dispose()` ç­‰æ–¹æ³• |

**`useThreeScene` ä¸»è¦æ–¹æ³•ï¼š**

| æ–¹æ³•               | è¯´æ˜                                                                 |
| ------------------ | -------------------------------------------------------------------- |
| `init()`           | åˆ›å»º WebGL rendererã€PerspectiveCameraã€OrbitControlsã€ç¯å…‰ã€ResizeObserver |
| `buildSolid()`     | æ ¹æ® `ComputedRegion` + æ—‹è½¬è½´ç”Ÿæˆ 3D ç½‘æ ¼ (å®ä½“ + çº¿æ¡†)             |
| `updateDisplay()`  | æ›´æ–°æ¸²æŸ“æ¨¡å¼ (solid/wireframe/transparent)ã€é¢œè‰²ã€åæ ‡è½´/ç½‘æ ¼å¯è§æ€§   |
| `startAnimation()` | å¯åŠ¨æ—‹è½¬ç”ŸæˆåŠ¨ç”» (ä» 0Â° é€æ­¥æ‰©å¤§åˆ° 360Â°)                             |
| `takeScreenshot()`  | å¯¼å‡ºå½“å‰ 3D è§†å›¾ä¸º PNG data URL                                      |
| `resetCamera()`    | é‡ç½®ç›¸æœºåˆ°åŒ…å›´çƒæœ€ä½³è§†è§’                                              |
| `dispose()`        | é‡Šæ”¾æ‰€æœ‰ GPU èµ„æºã€ç§»é™¤äº‹ä»¶ç›‘å¬                                       |

### utils â€” å·¥å…·åº“

| æ–‡ä»¶              | è¯´æ˜                                                                                  |
| ----------------- | ------------------------------------------------------------------------------------- |
| `mathEngine.ts`   | **æ•°å­¦è®¡ç®—æ ¸å¿ƒ**ã€‚~1200 è¡Œã€‚åŒ…å«æ›²çº¿è§£æã€åŒºåŸŸè®¡ç®—ã€æ•°å€¼ç§¯åˆ†ã€3D ç½‘æ ¼ç”Ÿæˆã€é¢„è®¾ç¤ºä¾‹ç­‰ |

**`mathEngine.ts` ä¸»è¦å¯¼å‡ºï¼š**

| ç¬¦å·                           | ç±»å‹     | è¯´æ˜                                                                 |
| ------------------------------ | -------- | -------------------------------------------------------------------- |
| `CurveType`                    | type     | `"y_of_x" \| "x_of_y" \| "x_const" \| "y_const"`                   |
| `CurveDefinition`              | interface| æ›²çº¿å®šä¹‰ï¼š`{ id, type, expression, equation, color? }`              |
| `RotationAxis`                 | type     | `"x" \| "y"`                                                        |
| `ComputedRegion`               | interface| è®¡ç®—åçš„åŒºåŸŸï¼š`{ upperProfile, lowerProfile, xMin, xMax }`          |
| `RevolutionResult`             | interface| è®¡ç®—ç»“æœï¼š`{ volume, formulaLatex, region, methodKey }`             |
| `parseEquation(raw)`           | function | å°† `"y = sqrt(x-1)"` è§£æä¸º `{ type, expression }`                 |
| `computeRegion(curves, ...)`   | function | ä»æ›²çº¿é›†åˆè®¡ç®—ä¸Š/ä¸‹è¾¹ç•Œè½®å»“ã€‚3+ æ›²çº¿æ—¶è‡ªåŠ¨ç”¨äº¤ç‚¹æ”¶ç´§èŒƒå›´             |
| `computeVolume(region, axis)`  | function | æ•°å€¼ç§¯åˆ†æ±‚æ—‹è½¬ä½“ä½“ç§¯ (Simpson æ³•)ã€‚ç»• x è½´ç”¨åœ†ç›˜æ³•ï¼Œç»• y è½´ç”¨æŸ±å£³æ³• |
| `autoDetectBounds(curves)`     | function | æ‰«ææ›²çº¿äº¤ç‚¹ï¼Œè‡ªåŠ¨ä¼°ç®—åˆç†çš„ x èŒƒå›´                                  |
| `generateMeshProfiles(...)`    | function | ä» 2D åŒºåŸŸç”Ÿæˆ 3D ç½‘æ ¼çš„å¾„å‘/è½´å‘è½®å»“ç‚¹                              |
| `generateRevolutionGeometry()` | function | å°†è½®å»“ç‚¹æ‰«ææ—‹è½¬ç”Ÿæˆä¸‰è§’ç½‘æ ¼ (positions, normals, indices)            |
| `sampleCurve(curve, ...)`      | function | å¯¹å•æ¡æ›²çº¿é‡‡æ ·ï¼Œè¿”å› `{ x, y }[]`ï¼Œä¾› Canvas2D ç»˜å›¾ä½¿ç”¨              |
| `formatVolume(volume)`         | function | å°†æ•°å€¼ä½“ç§¯æ ¼å¼åŒ–ä¸º Ï€ çš„å€æ•°/åˆ†æ•° (å¦‚ `4Ï€/3`)                         |
| `presetExamples`               | const    | é¢„è®¾ç¤ºä¾‹æ•°ç»„ (æŠ›ç‰©çº¿ä¸ç›´çº¿ã€æ­£å¼¦æ›²çº¿ã€ä¸¤æ›²çº¿ä¹‹é—´)                     |

**å†…éƒ¨å…³é”®å‡½æ•° (éå¯¼å‡º)ï¼š**

| å‡½æ•°                           | è¯´æ˜                                                           |
| ------------------------------ | -------------------------------------------------------------- |
| `compileCurve()`               | ä½¿ç”¨ mathjs ç¼–è¯‘è¡¨è¾¾å¼ä¸ºå¯æ±‚å€¼å¯¹è±¡                              |
| `evalCurve()`                  | å®‰å…¨æ±‚å€¼å·²ç¼–è¯‘æ›²çº¿ï¼Œå¤„ç† NaN/Infinity                           |
| `findIntersectionsXRange()`    | æ‰«æ+äºŒåˆ†æ³•å¯»æ‰¾ä¸¤å‡½æ•°åœ¨æŒ‡å®šåŒºé—´å†…çš„äº¤ç‚¹ x å€¼                    |
| `computeRegionTwoCurves()`     | ä¸¤æ¡æ›²çº¿çš„ max/min ç”Ÿæˆä¸Šä¸‹è½®å»“                                 |
| `computeRegionMultiCurves()`   | å¤šæ¡æ›²çº¿å–å…¨å±€ max/min ç”Ÿæˆä¸Šä¸‹è½®å»“                             |
| `createInverseFunction()`      | å¯¹ x=g(y) ç±»å‹æ›²çº¿é‡‡æ ·+äºŒåˆ†ï¼Œåˆ›å»ºè¿‘ä¼¼ y(x) åå‡½æ•°               |
| `simpsonsRule()`               | Simpson 1/3 æ•°å€¼ç§¯åˆ†                                            |
| `createInterpolator()`         | ä»ç¦»æ•£è½®å»“ç‚¹åˆ›å»ºçº¿æ€§æ’å€¼å‡½æ•°                                    |
| `computeNormals()`             | ä¸ºä¸‰è§’ç½‘æ ¼è®¡ç®—å¹³æ»‘æ³•çº¿                                          |
| `isConstantExpression()`       | åˆ¤æ–­è¡¨è¾¾å¼æ˜¯å¦ä¸ºå¸¸é‡ (ä¸å«è‡ªç”±å˜é‡)                              |

### i18n â€” å›½é™…åŒ–

| æ–‡ä»¶                   | è¯´æ˜                                                    |
| ---------------------- | ------------------------------------------------------- |
| `i18n/index.ts`        | åˆ›å»º i18n å®ä¾‹ã€‚è‡ªåŠ¨æ£€æµ‹æµè§ˆå™¨è¯­è¨€ï¼Œæ”¯æŒ localStorage æŒä¹…åŒ– |
| `locales/en.json`      | è‹±æ–‡æ–‡æ¡ˆ (appã€homeã€revolutionã€common å‘½åç©ºé—´)        |
| `locales/zh.json`      | ä¸­æ–‡æ–‡æ¡ˆ (åŒç»“æ„)                                        |

**i18n å‘½åç©ºé—´ï¼š**
- `app.*` â€” å…¨å±€æ ‡é¢˜ã€å¯¼èˆªã€é¡µè„š
- `home.*` â€” é¦–é¡µ
- `revolution.*` â€” æ—‹è½¬ä½“é¡µé¢ (curvesã€boundsã€axisã€displayã€resultã€errorsã€helpã€presets)
- `common.*` â€” é€šç”¨è¯æ±‡

### router â€” è·¯ç”±

| æ–‡ä»¶              | è¯´æ˜                                                    |
| ----------------- | ------------------------------------------------------- |
| `router/index.ts` | å®šä¹‰æ‰€æœ‰è·¯ç”±ã€‚ä½¿ç”¨ `createWebHistory`ã€‚æ‡’åŠ è½½é¡µé¢ç»„ä»¶ã€‚404 é‡å®šå‘åˆ°é¦–é¡µ |

**è·¯ç”±è¡¨ï¼š**

| è·¯å¾„           | é¡µé¢ç»„ä»¶              | çŠ¶æ€     |
| -------------- | --------------------- | -------- |
| `/`            | `Home.vue`            | âœ… å·²å®ç° |
| `/revolution`  | `RevolutionVolume.vue`| âœ… å·²å®ç° |
| `/matrix`      | `PlaceholderPage.vue` | ğŸš§ å ä½  |
| `/graphing`    | `PlaceholderPage.vue` | ğŸš§ å ä½  |
| `/derivatives` | `PlaceholderPage.vue` | ğŸš§ å ä½  |
| `/geometry`    | `PlaceholderPage.vue` | ğŸš§ å ä½  |
| `/statistics`  | `PlaceholderPage.vue` | ğŸš§ å ä½  |

---

## æ ¸å¿ƒåŠŸèƒ½ï¼šæ—‹è½¬ä½“ä½“ç§¯å¯è§†åŒ–

### æ•°æ®æµ

```
ç”¨æˆ·è¾“å…¥æ–¹ç¨‹ (å¦‚ "y = sqrt(x-1)")
       â”‚
       â–¼
 parseEquation()  â†’  { type: "y_of_x", expression: "sqrt(x-1)" }
       â”‚
       â–¼
 autoDetectBounds()  â†’  è‡ªåŠ¨è®¡ç®— xMin/xMax (åŸºäºæ›²çº¿äº¤ç‚¹)
       â”‚
       â–¼
 computeRegion()  â†’  ComputedRegion { upperProfile[], lowerProfile[], xMin, xMax }
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â–¼                          â–¼
 computeVolume()            generateMeshProfiles()
  â†’ æ•°å€¼ç§¯åˆ†(Simpson)          â†’ å¾„å‘/è½´å‘è½®å»“
  â†’ RevolutionResult             â”‚
  â†’ formulaLatex (KaTeX)         â–¼
                          generateRevolutionGeometry()
                            â†’ positions/normals/indices
                                  â”‚
                                  â–¼
                          useThreeScene.buildSolid()
                            â†’ THREE.Mesh (å®ä½“+çº¿æ¡†)
                            â†’ 3D æ¸²æŸ“
```

### æ›²çº¿è¾“å…¥ä¸è§£æ

ç”¨æˆ·åœ¨è¾“å…¥æ¡†ä¸­ç›´æ¥è¾“å…¥å®Œæ•´çš„æ–¹ç¨‹å­—ç¬¦ä¸²ï¼Œå¦‚ï¼š

- `y = x^2` â†’ è§£æä¸º `y_of_x` ç±»å‹
- `y = 1` â†’ è§£æä¸º `y_const` ç±»å‹ (isConstantExpression æ£€æµ‹æ— è‡ªç”±å˜é‡ x)
- `x = 0` â†’ è§£æä¸º `x_const` ç±»å‹
- `x = y^2` â†’ è§£æä¸º `x_of_y` ç±»å‹ (æ£€æµ‹åˆ°è‡ªç”±å˜é‡ y)

è§£ææµç¨‹ (`parseEquation`):
1. æ­£åˆ™åŒ¹é… `y = ...` æˆ– `x = ...`
2. æå–å³ä¾§è¡¨è¾¾å¼
3. é€šè¿‡ `isConstantExpression()` åˆ¤æ–­æ˜¯å¸¸é‡è¿˜æ˜¯å‡½æ•°
4. è¿”å› `{ type, expression }`

è¡¨è¾¾å¼ç”± mathjs ç¼–è¯‘ä¸æ±‚å€¼ï¼Œæ”¯æŒ `sqrt`, `sin`, `cos`, `tan`, `exp`, `log`, `pi`, `e`, `abs`, `^` ç­‰ã€‚

### åŒºåŸŸè®¡ç®—ç®—æ³•

`computeRegion()` æµç¨‹ï¼š

1. **åˆ†ç±»æ›²çº¿**ï¼šå°† `x_const` æ›²çº¿åˆ†ç¦»å‡ºæ¥ä½œä¸º x æ–¹å‘è¾¹ç•Œï¼Œå…¶ä½™ä¸ºå‡½æ•°æ›²çº¿
2. **ç¡®å®š x èŒƒå›´**ï¼šä» `x_const` å€¼å’Œç”¨æˆ·è¾“å…¥çš„ xMin/xMax ç¡®å®š `effectiveXMin`/`effectiveXMax`
3. **æ„å»º y(x) å‡½æ•°**ï¼š
   - `y_of_x` / `y_const` â†’ ç›´æ¥æ±‚å€¼
   - `x_of_y` â†’ é€šè¿‡ `createInverseFunction()` å»ºç«‹è¿‘ä¼¼åå‡½æ•°
4. **æ”¶ç´§è¾¹ç•Œ (3+ æ›²çº¿æ—¶)**ï¼šæ‰¾æ‰€æœ‰æ›²çº¿å¯¹çš„äº¤ç‚¹ï¼Œå°† effectiveXMax æ”¶ç´§åˆ°æœ€è¿œäº¤ç‚¹å¤„ï¼Œé˜²æ­¢åŒºåŸŸè¶…å‡ºå°é—­èŒƒå›´
5. **é‡‡æ ·ç”Ÿæˆè½®å»“**ï¼šåœ¨ [effectiveXMin, effectiveXMax] ä¸Šå‡åŒ€é‡‡æ ·ï¼Œå¯¹æ¯ä¸ª x å–æ‰€æœ‰å‡½æ•°å€¼çš„ max (ä¸Šè¾¹ç•Œ) å’Œ min (ä¸‹è¾¹ç•Œ)

### ä½“ç§¯è®¡ç®—

| æ—‹è½¬è½´ | æ–¹æ³•       | å…¬å¼                                             |
| ------ | ---------- | ------------------------------------------------ |
| x è½´   | åœ†ç›˜/å«åœˆæ³• | V = Ï€ âˆ«[a,b] (R(x)Â² âˆ’ r(x)Â²) dx                |
| y è½´   | æŸ±å£³æ³•      | V = 2Ï€ âˆ«[a,b] \|x âˆ’ axisValue\| Â· h(x) dx      |

ä½¿ç”¨ Simpson 1/3 æ³•åˆ™è¿›è¡Œæ•°å€¼ç§¯åˆ† (è‡³å°‘ 500 æ­¥)ã€‚æ”¯æŒè‡ªå®šä¹‰æ—‹è½¬è½´ä½ç½® (`axisValue`)ã€‚

### 3D æ¸²æŸ“ç®¡çº¿

1. `generateMeshProfiles()` â€” å°† 2D åŒºåŸŸè½®å»“è½¬æ¢ä¸º `{ radius, axisPos }` å¾„å‘è½®å»“
2. `generateRevolutionGeometry()` â€” å°†å¾„å‘è½®å»“ç»•è½´æ—‹è½¬æ‰«æ ï¼Œç”Ÿæˆä¸‰è§’ç½‘æ ¼ (`Float32Array` positions/normals + `Uint32Array` indices)
3. `useThreeScene.buildSolid()` â€” ç”¨ç”Ÿæˆçš„å‡ ä½•æ•°æ®åˆ›å»º `THREE.Mesh` (å®ä½“ `MeshPhysicalMaterial` + çº¿æ¡† `LineSegments`)
4. æ¸²æŸ“æ¨¡å¼ï¼šsolid / wireframe / transparent (å¯åˆ‡æ¢)
5. åŠ¨ç”»ï¼šå¯ä» 0Â° é€æ­¥æ—‹è½¬åˆ° 360Â° å±•ç¤ºç”Ÿæˆè¿‡ç¨‹

### 2D ç”»å¸ƒè§†å›¾

`Canvas2D.vue` ä½¿ç”¨åŸç”Ÿ HTML Canvas APIï¼š

- åæ ‡ç³»ï¼šè‡ªåŠ¨è®¡ç®— x/y èŒƒå›´ï¼Œç­‰æ¯”ä¾‹ç¼©æ”¾
- ç½‘æ ¼çº¿ï¼šè‡ªé€‚åº” nice-step ç®—æ³•
- æ›²çº¿ç»˜åˆ¶ï¼šå¯¹æ¯æ¡æ›²çº¿é‡‡æ ·å¹¶è¿çº¿
- åŒºåŸŸå¡«å……ï¼šä¸Šä¸‹è½®å»“å›´æˆåŒºåŸŸï¼ŒåŠé€æ˜å¡«å…… + æ–œçº¿é˜´å½±
- æ—‹è½¬è½´æŒ‡ç¤ºï¼šçº¢è‰²è™šçº¿ + æ—‹è½¬ç®­å¤´å›¾æ ‡
- äº¤äº’ï¼šé¼ æ ‡å·¦é”®æ‹–æ‹½å¹³ç§»ã€æ»šè½®ç¼©æ”¾ã€è§¦æ‘¸æ”¯æŒ

---

## æ„å»ºä¸è¿è¡Œ

```bash
# å®‰è£…ä¾èµ–
pnpm install

# å¼€å‘æ¨¡å¼ (çƒ­é‡è½½, ç«¯å£ 3000)
pnpm dev

# ç”Ÿäº§æ„å»º (ç±»å‹æ£€æŸ¥ + Vite æ‰“åŒ…)
pnpm build

# é¢„è§ˆæ„å»ºäº§ç‰©
pnpm preview
```

**Vite é…ç½®è¦ç‚¹** (`vite.config.ts`):
- è·¯å¾„åˆ«åï¼š`@` â†’ `src/`
- æ‰‹åŠ¨åˆ†åŒ…ï¼šthree / mathjs / katex / vendor(vue å…¨å®¶æ¡¶) å„è‡ªç‹¬ç«‹ chunk
- chunk è­¦å‘Šé˜ˆå€¼ï¼š600 KB

---

## å…³é”®ä¾èµ–è¯´æ˜

| åŒ…å       | ç”¨é€”                                             | å¤‡æ³¨                          |
| ---------- | ------------------------------------------------ | ----------------------------- |
| `mathjs`   | è¡¨è¾¾å¼è§£æã€ç¼–è¯‘ã€å®‰å…¨æ±‚å€¼                        | æ‰“åŒ…ä½“ç§¯è¾ƒå¤§ (~660 KB min)    |
| `three`    | WebGL 3D æ¸²æŸ“                                    | å« OrbitControls æ’ä»¶         |
| `katex`    | åœ¨ç»“æœé¢æ¿ä¸­æ¸²æŸ“ LaTeX æ•°å­¦å…¬å¼                   | æ˜¾ç¤ºç§¯åˆ†å…¬å¼å’Œä½“ç§¯å€¼          |
| `vue-i18n` | ä¸­è‹±æ–‡å›½é™…åŒ–                                     | Composition API æ¨¡å¼          |
| `vue-router` | SPA è·¯ç”±                                       | æ‡’åŠ è½½æ‰€æœ‰é¡µé¢ç»„ä»¶            |